:root{
  --bg:#0b1220; --card:#0f172a; --ink:#e5e7eb; --muted:#94a3b8;
  --accent:#3b82f6; --accent-2:#22c55e; --danger:#ef4444;
  --bubble-user:#0f274e; --bubble-ai:#0c1426; --shadow:0 10px 30px rgba(0,0,0,.35);
  --chip:#0b1a33; --chip-ink:#cbd5e1; --badge:#0b1a33;
}

*{box-sizing:border-box}
html,body{height:100%; margin:0}
body{
  font:16px/1.55 system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  color:var(--ink);
  background:linear-gradient(180deg,rgba(59,130,246,.06) 0%, var(--bg) 140px);
}

/* TOPBAR */
.topbar{position:sticky; top:0; z-index:10; backdrop-filter:saturate(1.2) blur(6px);
  background:linear-gradient(180deg,rgba(2,6,23,.55),rgba(2,6,23,0)); border-bottom:1px solid rgba(100,116,139,.15);}
.bar-wrap{max-width:1280px; margin:0 auto; padding:14px 16px; display:flex; align-items:center; gap:12px;}
.logo{display:flex; align-items:center; gap:12px; font-weight:800}
.logo img{width:44px; height:44px; border-radius:12px; object-fit:cover; box-shadow:0 4px 18px rgba(2,6,23,.35);}
.tagline{font-size:12px; color:var(--muted); margin-top:-4px}
.spacer{flex:1}
.icon-btn{height:36px; padding:0 12px; border-radius:10px; border:1px solid rgba(100,116,139,.25); background:transparent; color:var(--ink); cursor:pointer}
.user-pill{display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:var(--badge); border:1px solid rgba(100,116,139,.2); font-size:13px}

/* GRID: Sol sidebar (260) | Orta (1fr) | Sağ sidebar (280) */
.wrap{
  max-width:1280px; margin:16px auto 20px; padding:0 16px;
  min-height:calc(100vh - 86px);
  display:grid; gap:16px;
  grid-template-columns:260px 1fr 280px;
  grid-template-rows:auto 1fr auto; /* head (yok) | board | alt (chips) */
}

/* Sidebars */
.sidebar{
  background:var(--card); border:1px solid rgba(100,116,139,.18);
  border-radius:14px; padding:12px; box-shadow:var(--shadow);
  min-height:0; overflow:auto;
}
.left{ grid-column:1; grid-row:1 / span 3; }
.right{ grid-column:3; grid-row:1 / span 3; }

/* SOL: History */
.history h4{margin:2px 0 10px 0; font-size:13px; color:var(--muted); display:flex; align-items:center; gap:10px}
#clearLastBtn{
  margin-left:auto; height:30px; padding:0 10px; border-radius:10px;
  border:1px solid rgba(100,116,139,.25); background:transparent; color:var(--ink); cursor:pointer
}
#clearLastBtn:hover{ background:rgba(148,163,184,.12); }
.hist-item{
  font-size:13px; padding:8px; border-radius:10px; border:1px solid rgba(100,116,139,.20);
  margin-bottom:8px; cursor:pointer; transition:transform .06s ease, background .15s ease;
}
.hist-item:hover{background:rgba(148,163,184,.10)}
.hist-item:active{ transform:scale(.99); }

/* SAĞ: Digest */
.digest{display:grid; gap:10px}
.digest-card{
  background:var(--card); border:1px solid rgba(100,116,139,.18);
  border-radius:12px; padding:12px; box-shadow:var(--shadow);
  display:grid; gap:6px; min-height:84px;
}
.dg-icon{ font-size:18px; opacity:.95 }
.dg-title{ font-weight:700; font-size:14px }
.dg-text{ color:var(--muted); font-size:13px; line-height:1.4 }

/* ORTA */
.center{ grid-column:2; grid-row:1 / span 3; display:grid; grid-template-rows: 1fr auto auto; gap:12px; }

/* Chat board */
.board{
  background:var(--card); border-radius:16px; box-shadow:var(--shadow);
  padding:16px; overflow:auto; min-height:0;
  border:1px solid rgba(100,116,139,.18);
}

/* Control bar */
.controlbar{
  display:grid; grid-template-columns:1fr auto; gap:10px; align-items:end;
  background:rgba(148,163,184,.10); border:1px solid rgba(100,116,139,.22);
  padding:12px; border-radius:14px; position:sticky; bottom:12px; z-index:5;
  backdrop-filter:saturate(1.1) blur(2px);
  box-shadow:0 12px 30px rgba(2,6,23,.28);
}
.ctrl{display:flex; flex-direction:column; gap:6px; background:rgba(148,163,184,.08); padding:10px; border-radius:12px; border:1px solid rgba(100,116,139,.15)}
.ctrl .lbl{font-size:12px; color:var(--muted); font-weight:600; letter-spacing:.2px}
.ctrl textarea{min-height:40px; padding:8px 10px; resize:vertical; border:1px solid rgba(100,116,139,.22); border-radius:10px; background:transparent; color:var(--ink)}
.ctrl textarea::placeholder{color:var(--muted); font-style:italic}
.btn{height:44px; padding:0 18px; border-radius:12px; border:0; color:#fff; background:var(--accent); font-weight:700; cursor:pointer; box-shadow:0 6px 18px rgba(37,99,235,.25);}
.btn:disabled{opacity:.7; cursor:not-allowed; position:relative}
.btn:disabled::after{content:""; position:absolute; right:14px; top:50%; width:14px; height:14px; margin-top:-7px; border:2px solid rgba(255,255,255,.7); border-top-color:transparent; border-radius:50%; animation:spin 0.8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Chips en altta */
.chips{
  display:flex; gap:8px; flex-wrap:wrap; padding:0; margin:0;
}
.chip{
  white-space:nowrap; padding:6px 10px; border-radius:999px;
  background:var(--chip); color:var(--chip-ink);
  border:1px solid rgba(100,116,139,.25); cursor:pointer; font-size:13px; transition:.15s
}
.chip:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(2,6,23,.18)}
.chip.active{background:var(--accent); color:#fff; border-color:transparent}

/* Chat balonları */
.row{display:flex; gap:12px; margin:12px 0}
.row.user{justify-content:flex-end}
.bubble{max-width:min(76%, 720px)}
.card{background:var(--bubble-ai); border:1px solid rgba(100,116,139,.2); border-radius:14px; padding:14px 16px; box-shadow:0 2px 12px rgba(2,6,23,.25);}
.row.user .card{background:var(--bubble-user); border-color:rgba(59,130,246,.45)}
.md :is(h1,h2,h3){margin:.6em 0 .35em} .md h2{font-size:18px} .md h3{font-size:16px}
.md p{margin:.45em 0} .md strong{font-weight:700}
.md table{border-collapse:collapse; width:100%; margin:.6em 0; border:1px solid rgba(100,116,139,.25); border-radius:10px; overflow:hidden}

/* Modallar (mevcut) */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,.45); backdrop-filter:blur(8px) saturate(1.1); z-index:50}
.modal.open{display:flex; animation:fadeIn .2s ease-out}
@keyframes fadeIn{from{opacity:0} to{opacity:1}}
.modal-card{background:var(--card); color:var(--ink); width:min(420px,90vw); border-radius:16px; box-shadow:0 30px 80px rgba(2,6,23,.55); padding:18px; border:1px solid rgba(100,116,139,.22); transform:scale(.98); animation:pop .25s ease-out forwards}
@keyframes pop{to{transform:scale(1)}}
.modal h3{margin:0 0 8px 0}
.modal .row-2{display:grid; grid-template-columns:1fr; gap:10px}
.modal input{height:42px; border:1px solid rgba(100,116,139,.25); border-radius:10px; padding:0 10px; background:transparent; color:var(--ink)}
.modal .actions{display:flex; gap:8px; justify-content:flex-end; margin-top:12px}
.link{background:transparent; border:0; color:var(--accent); cursor:pointer}

/* Welcome */
.welcome{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60; background:rgba(2,6,23,.55); backdrop-filter:blur(10px) saturate(1.1)}
.welcome.open{display:flex; animation:fadeIn .25s ease-out}
.welcome-card{ width:min(560px,92vw); border-radius:20px; padding:22px; background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); border:1px solid rgba(148,163,184,.25); box-shadow:0 40px 120px rgba(2,6,23,.65); }
.welcome-body{position:relative}
.welcome-head{display:flex; align-items:center; gap:12px; margin-bottom:8px}
.welcome-logo{width:44px; height:44px; border-radius:12px; object-fit:cover; box-shadow:0 6px 20px rgba(2,6,23,.45)}
.welcome-title{font-weight:800; font-size:20px}
.welcome-sub{color:var(--muted); font-size:13px; margin-top:2px}
.welcome-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:14px}
.btn-ghost{border:1px solid rgba(100,116,139,.25); background:transparent; color:var(--ink); height:42px; padding:0 14px; border-radius:12px; cursor:pointer}
.btn-accept{background:var(--accent); color:#fff; border:0; height:42px; padding:0 18px; border-radius:12px; cursor:pointer; box-shadow:0 10px 30px rgba(37,99,235,.55)}
.welcome-list{margin:10px 0 0 0; padding-left:16px; color:var(--muted); font-size:13px}

/* Footer/başka elementler şeffaf kalsın */
footer, .footer, #footer { background: transparent !important; }

/* Mobil uyum */
@media (max-width: 1024px){
  .wrap{
    grid-template-columns: 1fr; grid-template-rows: auto auto auto auto auto;
  }
  .left, .right{ grid-column:1; grid-row:auto; max-height:40vh; }
  .center{ grid-column:1; grid-row:auto; }
  .board{ min-height:40vh; }
  .chips{ -webkit-overflow-scrolling: touch; overflow-x:auto; flex-wrap:nowrap; }
}

/* Genel arka plan daha koyu */
body {
  background-color: #0e0f12; /* daha koyu bir siyah-gri */
  margin: 0;
  padding: 0;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Chat konteyneri tam ekran otursun */
.main-container {
  display: flex;
  flex: 1;
  height: 100%;
}

/* Sol ve sağ sidebar koyulaştırma */
.sidebar-left, 
.sidebar-right {
  background-color: #14151a; /* koyu gri */
  padding: 15px;
  border-radius: 10px;
}

/* Ortadaki chat alanı */
.chat-container {
  flex: 1;
  background-color: #0e0f12;
  display: flex;
  flex-direction: column;
  border-radius: 10px;
  padding: 0;
  margin: 0;
}

/* Chat input kısmı tam alta otursun, beyaz boşluk yok */
.chat-input {
  background-color: #1a1b20;
  border-top: 1px solid #2a2b30;
  padding: 10px;
  margin: 0;
}

/* Input içi daha koyu */
.chat-input input {
  background-color: #0e0f12;
  color: #fff;
  border: 1px solid #2a2b30;
  border-radius: 8px;
  padding: 10px;
  flex: 1;
}

.chat-input button {
  background-color: #2563eb; /* mavi buton */
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 15px;
  margin-left: 10px;
  cursor: pointer;
}